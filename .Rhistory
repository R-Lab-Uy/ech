paste0(
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/Casen",
seq(1990, 1994, 2),
".zip"
)
library(rvest)
library(dplyr)
spatial_task_view <- read_html("https://cran.r-project.org/web/views/Spatial.html")
res <- spatial_task_view %>%
html_nodes(xpath = "/html/body/ul[1]") %>%
html_children() %>%
html_text()
pkgs <- res %>%
stringr::str_replace_all("\\(core\\)", "") %>%
stringr::str_trim() %>%
cranlogs::cran_downloads(packages = ., when = "last-month") %>%
group_by(package) %>%
summarize(count = sum(count)) %>%
arrange(desc(count))
install.packages("cranlogs")
library(rvest)
library(dplyr)
spatial_task_view <- read_html("https://cran.r-project.org/web/views/Spatial.html")
res <- spatial_task_view %>%
html_nodes(xpath = "/html/body/ul[1]") %>%
html_children() %>%
html_text()
pkgs <- res %>%
stringr::str_replace_all("\\(core\\)", "") %>%
stringr::str_trim() %>%
cranlogs::cran_downloads(packages = ., when = "last-month") %>%
group_by(package) %>%
summarize(count = sum(count)) %>%
arrange(desc(count))
installed.packages()[!installed.packages() %in% pkgs$package]
install.packages("roxygen2")
all_years <- c(seq(1990, 2000, 2), seq(2003, 2009, 3), seq(2011, 2017, 2))
urls <- c(
paste0(
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/Casen",
seq(1990, 1994, 2),
".zip"
),
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/Casen1996.rar",
paste0(
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/Casen",
seq(1998, 2000, 2),
".zip"
),
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/Casen2003.zip",
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/casen2006.zip",
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/Casen2009spss.rar",
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen/layout/doc/bases/casen2011_octubre2011_enero2012_principal_08032013spss.rar",
"http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/CASEN_2013_MN_B_Principal_spss.rar",
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen-multidimensional/casen/docs/casen_2015_spss.rar",
"http://observatorio.ministeriodesarrollosocial.gob.cl/casen-multidimensional/casen/docs/casen_2017_spss.rar"
)
all_years <- 2011:2017
urls <- cbind(year = 2011:2017,
md = c( "http://www.ine.gub.uy/c/document_library/get_file?uuid=7eecaefc-be12-4f5f-93a4-d53cc2a20070&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=47ff59b2-ed30-408d-a94c-05220e75d39b&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=de9bb13a-9740-4732-8826-10b3489999b7&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=7aa5ba66-dc54-418d-85d9-9985c88ffde8&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=ecdb10a5-c2a6-46ba-bc49-d539e0264bbd&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=2043b2a5-d328-48a6-a65e-27be2a974924&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=e30dd18d-c9df-4740-952d-f7ab9ef4f8e4&groupId=10181"),
dic = c("http://www.ine.gub.uy/c/document_library/get_file?uuid=54523778-5f53-4df1-a265-3ff520941bca&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=8e8963a6-b9f2-47f3-abf5-119f988ad868&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=055d37e5-d587-4ba7-8a0d-358cd99a9e24&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=9c9612fd-3bc3-47c5-a684-06daaf25da6c&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=6287d12b-1003-4402-86ba-a48866743d88&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=54f72e41-e671-4bea-993c-631596e16883&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=b60f247b-03cb-4bb1-b84b-5d7328479fe2&groupId=10181"))
carpeta = getwd()
links <- data.frame(
year = all_years,
url = urls$md,
file = paste0(carpeta, "/", all_years, "_spss", gsub(".*\\.", "\\.", urls)),
stringsAsFactors = FALSE
)
links <- data.frame(
year = all_years,
url = urls[,2],
file = paste0(carpeta, "/", all_years, "_spss", gsub(".*\\.", "\\.", urls)),
stringsAsFactors = FALSE
)
View(links)
gsub(".*\\.", "\\.", urls[,2])
urls <- data.frame(cbind(year = 2011:2017,
md = c( "http://www.ine.gub.uy/c/document_library/get_file?uuid=7eecaefc-be12-4f5f-93a4-d53cc2a20070&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=47ff59b2-ed30-408d-a94c-05220e75d39b&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=de9bb13a-9740-4732-8826-10b3489999b7&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=7aa5ba66-dc54-418d-85d9-9985c88ffde8&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=ecdb10a5-c2a6-46ba-bc49-d539e0264bbd&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=2043b2a5-d328-48a6-a65e-27be2a974924&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=e30dd18d-c9df-4740-952d-f7ab9ef4f8e4&groupId=10181"),
dic = c("http://www.ine.gub.uy/c/document_library/get_file?uuid=54523778-5f53-4df1-a265-3ff520941bca&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=8e8963a6-b9f2-47f3-abf5-119f988ad868&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=055d37e5-d587-4ba7-8a0d-358cd99a9e24&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=9c9612fd-3bc3-47c5-a684-06daaf25da6c&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=6287d12b-1003-4402-86ba-a48866743d88&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=54f72e41-e671-4bea-993c-631596e16883&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=b60f247b-03cb-4bb1-b84b-5d7328479fe2&groupId=10181"),
file = paste0(carpeta, "/", all_years, "_spss")),
stringsAsFactors = FALSE)
1:nrow(links)
urls <- data.frame(cbind(year = 2011:2017,
md = c( "http://www.ine.gub.uy/c/document_library/get_file?uuid=7eecaefc-be12-4f5f-93a4-d53cc2a20070&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=47ff59b2-ed30-408d-a94c-05220e75d39b&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=de9bb13a-9740-4732-8826-10b3489999b7&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=7aa5ba66-dc54-418d-85d9-9985c88ffde8&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=ecdb10a5-c2a6-46ba-bc49-d539e0264bbd&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=2043b2a5-d328-48a6-a65e-27be2a974924&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=e30dd18d-c9df-4740-952d-f7ab9ef4f8e4&groupId=10181"),
dic = c("http://www.ine.gub.uy/c/document_library/get_file?uuid=54523778-5f53-4df1-a265-3ff520941bca&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=8e8963a6-b9f2-47f3-abf5-119f988ad868&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=055d37e5-d587-4ba7-8a0d-358cd99a9e24&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=9c9612fd-3bc3-47c5-a684-06daaf25da6c&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=6287d12b-1003-4402-86ba-a48866743d88&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=54f72e41-e671-4bea-993c-631596e16883&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=b60f247b-03cb-4bb1-b84b-5d7328479fe2&groupId=10181"),
file = paste0(carpeta, "/", all_years, "_spss")),
stringsAsFactors = FALSE)
links <- urls[urls$year %in% anios, ]
anios <- all_years
links <- urls[urls$year %in% anios, ]
j=1
u <- links$url[[j]]
f <- links$file[[j]]
y <- links$year[[j]]
u <- links$md[[j]]
f <- links$file[[j]]
y <- links$year[[j]]
try(utils::download.file(u, f, mode = "wb"))
urls <- data.frame(cbind(year = 2011:2017,
md_sav = c( "http://www.ine.gub.uy/c/document_library/get_file?uuid=cc986929-5916-4d4f-a87b-3fb20a169879&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=144daa3d-0ebf-4106-ae11-a150511addf9&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=9ddf38cc-99bb-4196-992b-77530b025237&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=68cc1d11-e017-4a6d-a749-5a1e1a4a5306&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=7c62ef78-0cc6-4fba-aae4-921ff5ceddd6&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=715c873b-539f-4e92-9159-d38063270951&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=e38ea53c-7253-4007-9f67-2f5f161eea91&groupId=10181"),
md_dat = c( "http://www.ine.gub.uy/c/document_library/get_file?uuid=7eecaefc-be12-4f5f-93a4-d53cc2a20070&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=47ff59b2-ed30-408d-a94c-05220e75d39b&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=de9bb13a-9740-4732-8826-10b3489999b7&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=7aa5ba66-dc54-418d-85d9-9985c88ffde8&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=ecdb10a5-c2a6-46ba-bc49-d539e0264bbd&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=2043b2a5-d328-48a6-a65e-27be2a974924&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=e30dd18d-c9df-4740-952d-f7ab9ef4f8e4&groupId=10181"),
dic = c("http://www.ine.gub.uy/c/document_library/get_file?uuid=54523778-5f53-4df1-a265-3ff520941bca&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=8e8963a6-b9f2-47f3-abf5-119f988ad868&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=055d37e5-d587-4ba7-8a0d-358cd99a9e24&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=9c9612fd-3bc3-47c5-a684-06daaf25da6c&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=6287d12b-1003-4402-86ba-a48866743d88&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=54f72e41-e671-4bea-993c-631596e16883&groupId=10181",
"http://www.ine.gub.uy/c/document_library/get_file?uuid=b60f247b-03cb-4bb1-b84b-5d7328479fe2&groupId=10181"),
file = paste0(carpeta, "/ech_", all_years, "_spss.rar")),
stringsAsFactors = FALSE)
tempdir()
