<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ejemplo de uso del paquete `ech` • ech</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Ejemplo de uso del paquete `ech`">
<meta property="og:description" content="ech">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ech</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ech.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Educacion.html">Cálculo de variables educativas y estimación de indicadores</a>
    </li>
    <li>
      <a href="../articles/estimacion_ingresos.html">Estimación de ingresos</a>
    </li>
    <li>
      <a href="../articles/medicion_pobreza.html">Medición de la pobreza</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Ejemplo de uso del paquete <code>ech</code>
</h1>
            
            <h4 data-toc-skip class="date">2023-03-01</h4>
      
      
      <div class="hidden name"><code>ech.Rmd</code></div>

    </div>

    
    
<p>El paquete <code>ech</code> es una caja de herramientas para el
procesamiento de la <a href="http://www.ine.gub.uy/encuesta-continua-de-hogares1" class="external-link">Encuesta
Continua de Hogares de Uruguay</a> realizada por en Instituto Nacional
de Estadística (INE). Pretendiendo contribuir a la comunidad de usuaries
de R en Uruguay, facilitando el uso de una de las encuestas
socioeconómicas más importantes del país. En este sentido, el paquete
implementa una serie de funciones que permiten el cálculo de los
principales indicadores socioeconómicos que permite la encuesta.</p>
<div class="section level2">
<h2 id="instalación">Instalación<a class="anchor" aria-label="anchor" href="#instalaci%C3%B3n"></a>
</h2>
<!-- Para la versión estable -->
<p>Para la versión en desarrollo</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># install.packages('devtools') </span></span>
<span><span class="co"># si no tiene instalado devtools</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"calcita/ech"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ech</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="funciones-para-leer-datos">Funciones para leer datos<a class="anchor" aria-label="anchor" href="#funciones-para-leer-datos"></a>
</h2>
<p>Una serie de funciones del paquete que se usan internamente permiten
descargar de la página del INE y convertir a un formato tidy los datos
de: Índice de Precios al Consumo (IPC con base 2010), el Índice de
Precios de Alimentos y Bebidas (IPAB con base 2010), Canasta Básica
Alimentaria y No Alimentaria (CBA y CBNA), la codigue de CIIU4, los
microdatos de cada ECH y sus respectivos diccionarios para los años 2011
a 2019.</p>
<ul>
<li>
</ul>
</div>
<div class="section level2">
<h2 id="funciones-para-crear-variables">Funciones para crear variables<a class="anchor" aria-label="anchor" href="#funciones-para-crear-variables"></a>
</h2>
<p>Las funciones para crear variables se organizan según la dimensión a
la cual corresponden, así tenemos:</p>
<ul>
<li><p>Vivienda (Dwelling): permite calcular la situación estructural y
coyuntural de la vivienda, las privaciones de la vivienda, hacinamiento
y la tenencia de la vivienda.</p></li>
<li><p>Educación (Education): permite calcular el máximo nivel
alcanzado, los años de estudio, la completitud según niveles, la
asistencia a un centro educativo.</p></li>
<li><p>Mercado de trabajo (Employment): permite calcular la condición de
actividad, la PEA (población económicamente activa), PET (población en
edad de trabajar), PO (población ocupada) y PD (población desocupada),
las restricciones al empleo, subempleo y las ramas de actividad según
CIIU4.</p></li>
<li><p>Tipo de hogar (Household type): permite construir una tipología
de hogar.</p></li>
<li><p>Ingresos y desigualdad (Income): permite calcular el ingreso
deflactado (por el índice y año base elegido), quintiles y deciles de
ingreso, el ingreso laboral per cápita y por hora.</p></li>
<li><p>Pobreza (Poverty): permite calcular pobreza e indigencia y las
NBI (Necesidad Básicas Insatisfechas).</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="funciones-para-estimar-indicadores">Funciones para estimar indicadores<a class="anchor" aria-label="anchor" href="#funciones-para-estimar-indicadores"></a>
</h2>
<p>Se pueden estimar medias y proporciones, totales y ratios, el Índice
de Gini, el Brecha salarial de género (GPG, por sus siglas en inglés
Gender Pay Gap) y la relación quintil5/quintil1 (QSR, Quintil Share
Ratio). Para los años 2018 y 2019 se cuenta con la información de las
UPM (Unidades Primarias de Muestreo) y estratos por lo cual es posible
definir correctamente el diseño de muestra y obtener intervalos de
confianza correctos.</p>
<ul>
<li>
<code><a href="../reference/get_estimation_mean.html">get_estimation_mean()</a></code>:</li>
<li>
<code><a href="../reference/get_estimation_median.html">get_estimation_median()</a></code>:</li>
<li>
<code><a href="../reference/get_estimation_total.html">get_estimation_total()</a></code>:<br>
</li>
<li>
<code><a href="../reference/get_estimation_ratio.html">get_estimation_ratio()</a></code>:<br>
</li>
<li>
<code><a href="../reference/get_estimation_gini.html">get_estimation_gini()</a></code>:</li>
<li>
<code><a href="../reference/get_estimation_gpg.html">get_estimation_gpg()</a></code>:</li>
<li>
<code><a href="../reference/get_estimation_qsr.html">get_estimation_qsr()</a></code>:</li>
</ul>
</div>
<div class="section level2">
<h2 id="modo-de-uso">Modo de uso<a class="anchor" aria-label="anchor" href="#modo-de-uso"></a>
</h2>
<p>El paquete ech permite descargar los microdatos oficiales desde la
web del INE o bien utilizar microdatos ya procesados. En el primer caso
los datos se obtiene a través de la función
<code><a href="../reference/get_microdata.html">get_microdata()</a></code>. En el segundo caso, puede usar la función
<code><a href="../reference/read_microdata.html">read_microdata()</a></code> para leerlos. El paquete tiene tres
grandes conjuntos de funciones: - las que leen datos desde la web del
INE, se llaman get_<em>(). - las que calculan variables tanto a nivel
hogares como personas, estas tienen nombres descriptivos en inglés que
se detallan más adelante. - las que estiman indicadores y calculan los
intervalos de confianza asociados, se llaman get_estimation_</em>().</p>
<p>Ejemplo de descarga de microdatos:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Cargo la libreria</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ech</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargo la base</span></span>
<span><span class="va">ech19</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_microdata.html">get_microdata</a></span><span class="op">(</span>year <span class="op">=</span> <span class="st">"2019"</span>, <span class="co"># Año/s a descargar (2011-2019)</span></span>
<span>              folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="co"># Carpeta para descarga   </span></span>
<span>              toR <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># No lo guarda en formato RData </span></span></code></pre></div>
<p>Como un segundo paso, recomendamos utilizar la función
<code><a href="../reference/organize_names.html">organize_names()</a></code> que estandariza los nombres de variables
llevándolas a los nombres de 2017. Este paso facilita el uso de las
demás funciones en la medida que todas contienen parámetros que dan
cuenta del nombre de alguna variable y cuyo valor por defecto es el
nombre de la variable para 2017. La correspondencia entre variables para
cada año se puede observar en el diccionario <code><a href="../reference/dic.html">ech::dic</a></code>. No
todas las variables de la ech están contempladas en el diccionario por
lo que este proyecto está abierto a contribuciones que en la medida que
se agreguen nuevas funciones serán necesarias.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Organizamos nombres de variables</span></span>
<span><span class="co"># para el caso de 2019 no es necesario porque el diccionario base es el 2017 y las variables se llaman igual</span></span>
<span><span class="co">#ech19 &lt;- organize_names(ech19, 2019)</span></span>
<span><span class="va">ech19</span> <span class="op">&lt;-</span> <span class="va">ech19</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>upm <span class="op">=</span> <span class="va">upm_fic</span><span class="op">)</span></span></code></pre></div>
<p>Para calcular las variables PEA, PET, PO y PD usamos la función
<code><a href="../reference/employment.html">employment()</a></code>, especificando el nombre del objeto que
contiene los microdatos y la variable que contiene la información de la
condición de actividad (por defecto pobpcoac).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculamos variables de empleo</span></span>
<span></span>
<span><span class="va">ech19</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/employment.html">employment</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ech19</span><span class="op">)</span></span></code></pre></div>
<p>Otra función muy útil que combina además otra fuente de datos es
<code><a href="../reference/income_constant_prices.html">income_constant_prices()</a></code> que permite calcular el ingreso a
precios constantes, usando como deflactor el IPC o el IPAB. Es necesario
definir, el data frame, el año base y el mes base, y el tipo de IPC que
puede ser “G” (general) o “R” (regional). Este último solo está
disponible a partir de 2010.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Organizamos nombres de variables</span></span>
<span></span>
<span><span class="va">ech19</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/income_constant_prices.html">income_constant_prices</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ech19</span>, <span class="co"># Data.frame de una ech</span></span>
<span>                                base_month <span class="op">=</span> <span class="fl">6</span>, <span class="co"># Mes base </span></span>
<span>                                base_year <span class="op">=</span> <span class="fl">2019</span>, <span class="co"># Año base</span></span>
<span>                                index <span class="op">=</span> <span class="st">"IPC"</span>, <span class="co"># Indice</span></span>
<span>                                level <span class="op">=</span> <span class="st">"G"</span><span class="op">)</span> <span class="co"># Puede ser General ("G") o Regional ("R")</span></span></code></pre></div>
<p>Para estimar una variable, por ejemplo, pobre06 que ya viene en la
ECH calculada, elegimos la función de estimación adecuada, por ejemplo,
<code><a href="../reference/get_estimation_mean.html">get_estimation_mean()</a></code> y definimos si queremos cruzarlo con
alguna otra variable o hacer una estimación en un dominio (por ejemplo,
solo el país urbano) y a nivel de hogares o personas.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Genero una estimación:</span></span>
<span></span>
<span><span class="va">pobre_x_dpto</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimation_mean.html">get_estimation_mean</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ech19</span>, <span class="co"># Indico el data.frame</span></span>
<span>                           variable <span class="op">=</span> <span class="st">"pobre06"</span>, <span class="co"># La variable a estimar</span></span>
<span>                           by.x <span class="op">=</span> <span class="st">"nomdpto"</span>, <span class="co"># La variable de agrupación</span></span>
<span>                           by.y <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># Se permite otra variable de agrupación</span></span>
<span>                           domain <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># Se podría indicar un dominio</span></span>
<span>                           level <span class="op">=</span> <span class="st">"h"</span>, <span class="co"># Defino que lo haga a nivel de hogar</span></span>
<span>                           name <span class="op">=</span> <span class="st">"Pobreza"</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ech-geouy">ech &amp; geouy<a class="anchor" aria-label="anchor" href="#ech-geouy"></a>
</h2>
<p>El uso de este paquete se potencia al usarlo en conjunto con <a href="https://github.com/RichDeto/geouy" class="external-link">geouy</a> ya que permite
acceder a diferentes capas geográficas de Uruguay y construir mapas
temáticos. Por ejemplo, a la estimación anterior de hogares pobres por
departamento se le pueden agregar las geometrías de los polígonos de
cada departamento para construir un mapa de coropletas.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Solo me quedo con la estimación de pobre </span></span>
<span></span>
<span><span class="va">pobre_x_dpto</span> <span class="op">&lt;-</span> <span class="va">pobre_x_dpto</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">pobre06</span> <span class="op">==</span> <span class="st">"Pobre"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Agrego geometrías</span></span>
<span></span>
<span><span class="va">pobre_x_dpto_geo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_geom.html">add_geom</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pobre_x_dpto</span>, <span class="co"># Los datos en una unidad geográfica de entre las opciones</span></span>
<span>                            unit <span class="op">=</span> <span class="st">"Departamentos"</span>, <span class="co"># Unidad de agregación de los datos</span></span>
<span>                            variable <span class="op">=</span> <span class="st">"nomdpto"</span><span class="op">)</span> <span class="co"># Variable correspondiente a los códigos a la unidad</span></span></code></pre></div>
<p>Y con esto, podemos hacer un mapa con <code>ggplot2</code> muy
fácilmente de estas estimaciones.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Hago un mapa</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_geouy.html">plot_geouy</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pobre_x_dpto_geo</span>, col <span class="op">=</span> <span class="st">"Pobreza"</span>, l <span class="op">=</span> <span class="st">"%"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="aportes-de-la-comunidad">Aportes de la comunidad<a class="anchor" aria-label="anchor" href="#aportes-de-la-comunidad"></a>
</h3>
<p>Este paquete se propone incorporar cualquier función de propósitos
generales que utilice como base le Encuesta Continua de Hogares (ECH) de
Uruguay. Todos los aportes en este sentido son bienvenidos.</p>
<p>Si trabajas con la ECH de Uruguay y querés agregar tu función o tus
datos, te recomendamos que leas los siguientes consejos de como
colaborar <a href="https://github.com/calcita/ech/issues/2" class="external-link">aquí</a>.
También podés generar un issue si encontrás algún error.</p>
<p>Si este paquete te parece útil también hacenoslo saber que es nuestro
motor para seguir desarrollándolo.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gabriela Mathieu, Richard Detomasi.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
